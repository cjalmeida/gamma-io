# Configuration file used in tests

_workdir: !env IO_TEST_TMP

# File-systems options
filesystems:
  # Options entry for 'test-bucket', you can have any name here
  test_bucket:
    # the regex to match against the location URL
    match: "s3://test-bucket/.*"

    # everything below here is returned as part of the options map
    endpoint_url: http://localhost:4566

datasets:
  source:
    customers_1k:
      location: https://github.com/cjalmeida/gamma-io/raw/main/samples/customers-1000.zip
      format: csv
      compression: zip

    customers_1k_plain:
      location: https://github.com/cjalmeida/gamma-io/raw/main/samples/customers-1000.csv
      format: csv

  raw:
    customers:
      location: !j2 "file://{{ c._workdir }}/data/customers"
      format: parquet
      compression: snappy # for Spark compat
      partition_by: [cluster]

    customers_feather:
      location: !j2 "file://{{ c._workdir }}/data/customers_feather"
      format: feather
      compression: zstd
      partition_by: [cluster]

    customers_csv:
      location: !j2 "file://{{ c._workdir }}/data/customers.csv.gz"
      format: csv
      compression: gzip

    customers_csv_plain:
      location: !j2 "file://{{ c._workdir }}/data/customers.csv"
      format: csv

    customers_excel:
      location: !j2 "file://{{ c._workdir }}/data/customers.xlsx"
      format: excel

    customers_s3:
      location: !j2 "s3://test-bucket/customers"
      format: parquet
      compression: snappy # for Spark compat
      partition_by: [cluster]
